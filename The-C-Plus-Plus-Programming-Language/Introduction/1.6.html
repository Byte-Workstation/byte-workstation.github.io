<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.32">
    <title>1.6 C和C++ | C++ 程序设计语言</title><meta name="description" content="">
    <link rel="modulepreload" href="/The-C-Plus-Plus-Programming-Language/assets/app.fce06a0c.js"><link rel="modulepreload" href="/The-C-Plus-Plus-Programming-Language/assets/1.6.html.d4d7aa88.js"><link rel="modulepreload" href="/The-C-Plus-Plus-Programming-Language/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/The-C-Plus-Plus-Programming-Language/assets/1.6.html.bee9f940.js">
    <link rel="stylesheet" href="/The-C-Plus-Plus-Programming-Language/assets/style.fc712d7f.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/The-C-Plus-Plus-Programming-Language/" class=""><!----><span class="site-name">C++ 程序设计语言</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/The-C-Plus-Plus-Programming-Language/Introduction/" class="router-link-active" aria-label="导论"><!--[--><!--]--> 导论 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/The-C-Plus-Plus-Programming-Language/Basic%20Facilities/" class="" aria-label="第一部分：基本功能"><!--[--><!--]--> 第一部分：基本功能 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/The-C-Plus-Plus-Programming-Language/Introduction/" class="router-link-active" aria-label="导论"><!--[--><!--]--> 导论 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/The-C-Plus-Plus-Programming-Language/Basic%20Facilities/" class="" aria-label="第一部分：基本功能"><!--[--><!--]--> 第一部分：基本功能 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/The-C-Plus-Plus-Programming-Language/Introduction/" class="router-link-active sidebar-item sidebar-heading collapsible" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a><!----></li><li><p class="sidebar-item sidebar-heading active collapsible">第一章 致读者 <span class="down arrow"></span></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/The-C-Plus-Plus-Programming-Language/Introduction/1.1.html" class="sidebar-item" aria-label="1.1 本书的结构"><!--[--><!--]--> 1.1 本书的结构 <!--[--><!--]--></a><!----></li><li><a href="/The-C-Plus-Plus-Programming-Language/Introduction/1.2.html" class="sidebar-item" aria-label="1.2 学习C++"><!--[--><!--]--> 1.2 学习C++ <!--[--><!--]--></a><!----></li><li><a href="/The-C-Plus-Plus-Programming-Language/Introduction/1.3.html" class="sidebar-item" aria-label="1.3 C++ 的设计"><!--[--><!--]--> 1.3 C++ 的设计 <!--[--><!--]--></a><!----></li><li><a href="/The-C-Plus-Plus-Programming-Language/Introduction/1.4.html" class="sidebar-item" aria-label="1.4 历史注记"><!--[--><!--]--> 1.4 历史注记 <!--[--><!--]--></a><!----></li><li><a href="/The-C-Plus-Plus-Programming-Language/Introduction/1.5.html" class="sidebar-item" aria-label="1.5 C++的使用"><!--[--><!--]--> 1.5 C++的使用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/The-C-Plus-Plus-Programming-Language/Introduction/1.6.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="1.6 C和C++"><!--[--><!--]--> 1.6 C和C++ <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/The-C-Plus-Plus-Programming-Language/Introduction/1.6.html#_1-6-1-给c程序员的建议" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.6.1 给C程序员的建议"><!--[--><!--]--> 1.6.1 给C程序员的建议 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/The-C-Plus-Plus-Programming-Language/Introduction/1.6.html#_1-6-2-给c-程序员的建议" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.6.2 给C++程序员的建议"><!--[--><!--]--> 1.6.2 给C++程序员的建议 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/The-C-Plus-Plus-Programming-Language/Introduction/1.7.html" class="sidebar-item" aria-label="1.7 有关在C++里编程的思考"><!--[--><!--]--> 1.7 有关在C++里编程的思考 <!--[--><!--]--></a><!----></li><li><a href="/The-C-Plus-Plus-Programming-Language/Introduction/1.8.html" class="sidebar-item" aria-label="1.8 忠告"><!--[--><!--]--> 1.8 忠告 <!--[--><!--]--></a><!----></li><li><a href="/The-C-Plus-Plus-Programming-Language/Introduction/1.9.html" class="sidebar-item" aria-label="1.9 参考文献"><!--[--><!--]--> 1.9 参考文献 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading collapsible">第二章 C++概览 <span class="right arrow"></span></p><!----></li><li><p class="sidebar-item sidebar-heading collapsible">第三章 标准库概览 <span class="right arrow"></span></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="_1-6-c和c" tabindex="-1"><a class="header-anchor" href="#_1-6-c和c" aria-hidden="true">#</a> 1.6 C和C++</h1><p>C被选作C++的基础语言是因为它：</p><ol><li>是通用的、简洁的、相对低级的。</li><li>适合用于大部分系统程序设计工作。</li><li>可以在每个地方的任何系统上运行。</li><li>适应于UNIX程序设计环境。</li></ol><p>C有它的问题，但一个从空白出发设计的语言也必然会有一些问题，况且我们了解C的问题。更重要的是，从C出发已经使“带类的C”成了一个有用的工具（或许还比较笨拙），而且只是在开始想到要将类似Simula的类加到C上之后没几个月的时间。</p><p>随着C++的使用变得更加广泛，以及它所提供的覆盖和超越C的功能变得更加重要，关于是否还应该保持兼容性的问题又一再地被提出来。很清楚，如果抛弃C的某些传统就可以避免一些问题（参见，例如[Sethi，1981]）。这些都没有做，因为：</p><ol><li>存在着成百万行的C代码可能从C++中获益，先决条件是不必将它们完全从C重写写成C++。</li><li>存在着成百万行用C写出的库函数和功能软件代码可以从C++程序里使用，或者在C++程序之上使用；先决条件是C++能够与C连接兼容，且在语法上与C类似。</li><li>存在着数以十万计的程序员了解C语言，只需要去学习C++新特征的使用，而不想去重新学习基础。</li><li>C++和C将在许多年中被同一些人用于同样的系统，因此其差异必须或者很小，或者是很大，以最大限度地减少错误和混乱的发生。</li></ol><p>C++的定义已经做了许多修订，以保证任何同时在C和C++里合法的结构在两个语言中都具有同样的意义（除了少量例外；B.2节）。</p><p>C语言本身也在发展和演化，部分地是在C++开发的影响之下[Rosler，1984]。ANSI C标准[C，1990]就包含了从“带类的C”借去的函数声明语法。借鉴是双向的，例如void*指针类型是为ANSI C发明的，但却在C++里第一次实现。正如本书的第一版所允诺的，C++的定义已经过修订，以去掉无缘无故的不兼容性。今天的C++比原来更加与C兼容了。这里的想法是让C++尽可能接近ANSI C---但又不过于接近[Koenig，1989]。百分之百的兼容性从来就不是目标，因为这将危害类型安全性以及用户类型与内部类型的平滑集成。</p><p>了解C并不是学习C++的先决条件。在C中编程序被鼓励使用的许多技术和诀窍由于C++语言的特征而变得多余了。例如，显式类型转换（casting）在C++里就没有在C里那么频繁（1.6.1节）。然而，好的C程序倾向于也是C++程序。例如，在Kernighan和Ritchie的《The C Programming Language》，2nd Edition（《C程序设计语言》已由机械工业出版社翻译出版）[Kernighan，1988]里的每个程序都是C++程序。任何有关静态类型语言的经验对于学习C++也都能有所帮助。</p><h2 id="_1-6-1-给c程序员的建议" tabindex="-1"><a class="header-anchor" href="#_1-6-1-给c程序员的建议" aria-hidden="true">#</a> 1.6.1 给C程序员的建议</h2><p>一个人对C了解得越好，在写C++程序时大概就越难避免C的风格，并会因此丢掉C++的某些潜在优势。请看一看附录B，那里描述了C与C++之间的差异。这里是几个有关的要点，在这些地方做同样的事情时，在C++里存在比C更好的方式：</p><ol><li><p>在C++里几乎不需要用宏。用const或enum定义明显的常量，用inline避免函数调用的额外开销，用template去刻画一族函数或者类型，用namespace去避免名字冲突。</p></li><li><p>不要在你需要变量之前去声明它，以保证你能立即对它进行初始化。声明可以出现在能出现语句的所有位置上，可以出现在for语句的初始化部分，可以出现在条件中。</p></li><li><p>不要用malloc()。new运算符能将同样的事情做得更好。对于realloc()，请试一试vector()。</p></li><li><p>试着去避免void*、指针算术、联合和强制，除了在某些函数或类实现的深层之外。在大部分情况下，强制都是设计错误的指示器。如果你必须使用某个显式的类型转换，请设法去用一个“新的强制”，设法写出一个描述你想做的事情的更精确的语句。</p></li><li><p>尽量少用数组和C风格的字符串。与传统的C风格相比，使用C++标准库string和vector常常可以简化程序设计。</p></li></ol><p>如果要符合C的连接规则，一个C++函数就必须被声明为具有C连接的。</p><p>最重要的是，请试着将程序考虑为一组由类和对象表示的相互作用的概念，而不是一堆数据结构和一些去拨弄数据结构中的二进制位的函数。</p><h2 id="_1-6-2-给c-程序员的建议" tabindex="-1"><a class="header-anchor" href="#_1-6-2-给c-程序员的建议" aria-hidden="true">#</a> 1.6.2 给C++程序员的建议</h2><p>到今天，许多人使用C++已经十几年了。大部分人是在某个单一的环境里使用C++，并已学会了在早期编译器和第一代的库所强加的束缚之下生存。经常可以看到这种情况，一个很有经验的C++程序员不仅很多年没有注意引进的新特征，也没有看到有关特征之间关系的变化，而这些情况已经使一些全新的程序设计技术变成可行的东西了。换句话说，你在第一次学习C++时没有想到或者认为不实际的东西，或许今天已经变成一种高明的方式。你只有通过重新考察基础的东西才能弄清楚它们。</p><p>请按顺序浏览各章，如果你已经知道了某一章的内容，你可以只用几分钟就翻过去；如果你还不知道其内容，那么你会学到一些不曾预料到的东西。我在写这本书时就学到了不少东西，而且我怀疑会有哪个C++程序员知道这里给出的所有特征和技术。进一步说，要用好这个语言，你需要一种观点，以便给这组特征和技术带来一种秩序。通过书中的组织结构和实例，本书就提供了一种这样的观点。</p><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/The-C-Plus-Plus-Programming-Language/Introduction/1.5.html" class="" aria-label="1.5 C++的使用"><!--[--><!--]--> 1.5 C++的使用 <!--[--><!--]--></a></span><span class="next"><a href="/The-C-Plus-Plus-Programming-Language/Introduction/1.7.html" class="" aria-label="1.7 有关在C++里编程的思考"><!--[--><!--]--> 1.7 有关在C++里编程的思考 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/The-C-Plus-Plus-Programming-Language/assets/app.fce06a0c.js" defer></script>
  </body>
</html>
