<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Chapter 2: How Objects Work | You Don't Know JS Yet</title><meta name="description" content="">
    <link rel="modulepreload" href="/You-Dont-Know-JS-Yet/assets/app.7fbe9127.js"><link rel="modulepreload" href="/You-Dont-Know-JS-Yet/assets/ch2.html.39e3be8f.js"><link rel="modulepreload" href="/You-Dont-Know-JS-Yet/assets/ch2.html.1c778d47.js"><link rel="modulepreload" href="/You-Dont-Know-JS-Yet/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/You-Dont-Know-JS-Yet/assets/style.7fb5c942.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/You-Dont-Know-JS-Yet/en-US/" class=""><!----><span class="site-name">You Don&#39;t Know JS Yet</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/preface.html" class="" aria-label="Preface"><!--[--><!--]--> Preface <!--[--><!--]--></a></div><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/get-started/" class="" aria-label="Get Started"><!--[--><!--]--> Get Started <!--[--><!--]--></a></div><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/scope-closures/" class="" aria-label="Scope &amp; Closures"><!--[--><!--]--> Scope &amp; Closures <!--[--><!--]--></a></div><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/objects-classes/" class="router-link-active" aria-label="Objects &amp; Classes"><!--[--><!--]--> Objects &amp; Classes <!--[--><!--]--></a></div><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/types-grammar/" class="" aria-label="Types &amp; Grammar"><!--[--><!--]--> Types &amp; Grammar <!--[--><!--]--></a></div><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/sync-async/" class="" aria-label="Sync &amp; Async"><!--[--><!--]--> Sync &amp; Async <!--[--><!--]--></a></div><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/es-next-beyond/" class="" aria-label="ES.Next &amp; Beyond"><!--[--><!--]--> ES.Next &amp; Beyond <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/You-Dont-Know-JS-Yet/objects-classes/ch2.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/preface.html" class="" aria-label="Preface"><!--[--><!--]--> Preface <!--[--><!--]--></a></div><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/get-started/" class="" aria-label="Get Started"><!--[--><!--]--> Get Started <!--[--><!--]--></a></div><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/scope-closures/" class="" aria-label="Scope &amp; Closures"><!--[--><!--]--> Scope &amp; Closures <!--[--><!--]--></a></div><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/objects-classes/" class="router-link-active" aria-label="Objects &amp; Classes"><!--[--><!--]--> Objects &amp; Classes <!--[--><!--]--></a></div><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/types-grammar/" class="" aria-label="Types &amp; Grammar"><!--[--><!--]--> Types &amp; Grammar <!--[--><!--]--></a></div><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/sync-async/" class="" aria-label="Sync &amp; Async"><!--[--><!--]--> Sync &amp; Async <!--[--><!--]--></a></div><div class="navbar-item"><a href="/You-Dont-Know-JS-Yet/en-US/es-next-beyond/" class="" aria-label="ES.Next &amp; Beyond"><!--[--><!--]--> ES.Next &amp; Beyond <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/You-Dont-Know-JS-Yet/objects-classes/ch2.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/You-Dont-Know-JS-Yet/en-US/objects-classes/foreword.html" class="sidebar-item sidebar-heading" aria-label="Foreword"><!--[--><!--]--> Foreword <!--[--><!--]--></a><!----></li><li><a href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch1.html" class="sidebar-item sidebar-heading" aria-label="Chapter 1: Object Foundations"><!--[--><!--]--> Chapter 1: Object Foundations <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="Chapter 2: How Objects Work"><!--[--><!--]--> Chapter 2: How Objects Work <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#property-descriptors" class="router-link-active router-link-exact-active sidebar-item" aria-label="Property Descriptors"><!--[--><!--]--> Property Descriptors <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#accessor-properties" class="router-link-active router-link-exact-active sidebar-item" aria-label="Accessor Properties"><!--[--><!--]--> Accessor Properties <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#enumerable-writable-configurable" class="router-link-active router-link-exact-active sidebar-item" aria-label="Enumerable, Writable, Configurable"><!--[--><!--]--> Enumerable, Writable, Configurable <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#object-sub-types" class="router-link-active router-link-exact-active sidebar-item" aria-label="Object Sub-Types"><!--[--><!--]--> Object Sub-Types <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#arrays" class="router-link-active router-link-exact-active sidebar-item" aria-label="Arrays"><!--[--><!--]--> Arrays <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#functions" class="router-link-active router-link-exact-active sidebar-item" aria-label="Functions"><!--[--><!--]--> Functions <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#object-characteristics" class="router-link-active router-link-exact-active sidebar-item" aria-label="Object Characteristics"><!--[--><!--]--> Object Characteristics <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#extensible" class="router-link-active router-link-exact-active sidebar-item" aria-label="Extensible"><!--[--><!--]--> Extensible <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#sealed" class="router-link-active router-link-exact-active sidebar-item" aria-label="Sealed"><!--[--><!--]--> Sealed <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#frozen" class="router-link-active router-link-exact-active sidebar-item" aria-label="Frozen"><!--[--><!--]--> Frozen <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#extending-the-mop" class="router-link-active router-link-exact-active sidebar-item" aria-label="Extending The MOP"><!--[--><!--]--> Extending The MOP <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#prototype-chain" class="router-link-active router-link-exact-active sidebar-item" aria-label="[[Prototype]] Chain"><!--[--><!--]--> [[Prototype]] Chain <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#creating-an-object-with-a-different-prototype" class="router-link-active router-link-exact-active sidebar-item" aria-label="Creating An Object With A Different [[Prototype]]"><!--[--><!--]--> Creating An Object With A Different [[Prototype]] <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#prototype-vs-prototype" class="router-link-active router-link-exact-active sidebar-item" aria-label="[[Prototype]] vs prototype"><!--[--><!--]--> [[Prototype]] vs prototype <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch2.html#objects-behavior" class="router-link-active router-link-exact-active sidebar-item" aria-label="Objects Behavior"><!--[--><!--]--> Objects Behavior <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch3" class="sidebar-item sidebar-heading" aria-label="/en-US/objects-classes/ch3"><!--[--><!--]--> /en-US/objects-classes/ch3 <!--[--><!--]--></a><!----></li><li><a href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch4" class="sidebar-item sidebar-heading" aria-label="/en-US/objects-classes/ch4"><!--[--><!--]--> /en-US/objects-classes/ch4 <!--[--><!--]--></a><!----></li><li><a href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch5" class="sidebar-item sidebar-heading" aria-label="/en-US/objects-classes/ch5"><!--[--><!--]--> /en-US/objects-classes/ch5 <!--[--><!--]--></a><!----></li><li><a href="/You-Dont-Know-JS-Yet/en-US/objects-classes/apA" class="sidebar-item sidebar-heading" aria-label="/en-US/objects-classes/apA"><!--[--><!--]--> /en-US/objects-classes/apA <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="chapter-2-how-objects-work" tabindex="-1"><a class="header-anchor" href="#chapter-2-how-objects-work" aria-hidden="true">#</a> Chapter 2: How Objects Work</h1><table><thead><tr><th style="text-align:left;">NOTE:</th></tr></thead><tbody><tr><td style="text-align:left;">Work in progress</td></tr></tbody></table><p>Objects are not just containers for multiple values, though clearly that&#39;s the context for most interactions with objects.</p><p>To fully understand the object mechanism in JS, and get the most out of using objects in our programs, we need to look more closely at a number of characteristics of objects (and their properties) which can affect their behavior when interacting with them.</p><p>These characteristics that define the underlying behavior of objects are collectively referred to in formal terms as the &quot;metaobject protocol&quot; (MOP)[^mop]. The MOP is useful not only for understanding how objects will behave, but also for overriding the default behaviors of objects to bend the language to fit our program&#39;s needs more fully.</p><h2 id="property-descriptors" tabindex="-1"><a class="header-anchor" href="#property-descriptors" aria-hidden="true">#</a> Property Descriptors</h2><p>Each property on an object is internally described by what&#39;s known as a &quot;property descriptor&quot;. This is, itself, an object (aka, &quot;metaobject&quot;) with several properties (aka &quot;attributes&quot;) on it, dictating how the target property behaves.</p><p>We can retrieve a property descriptor for any existing property using <code>Object.getOwnPropertyDescriptor(..)</code> (ES5):</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>myObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">favoriteNumber</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isDeveloper</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">&quot;Kyle&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>myObj<span class="token punctuation">,</span><span class="token string">&quot;favoriteNumber&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// {</span>
<span class="token comment">//     value: 42,</span>
<span class="token comment">//     enumerable: true,</span>
<span class="token comment">//     writable: true,</span>
<span class="token comment">//     configurable: true</span>
<span class="token comment">// }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>We can even use such a descriptor to define a new property on an object, using <code>Object.defineProperty(..)</code> (ES5):</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>anotherObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>anotherObj<span class="token punctuation">,</span><span class="token string">&quot;fave&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
    <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>     <span class="token comment">// default if omitted</span>
    <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>       <span class="token comment">// default if omitted</span>
    <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token comment">// default if omitted</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

anotherObj<span class="token punctuation">.</span>fave<span class="token punctuation">;</span>          <span class="token comment">// 42</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>If an existing property has not already been marked as non-configurable (with <code>configurable: false</code> in its descriptor), it can always be re-defined/overwritten using <code>Object.defineProperty(..)</code>.</p><table><thead><tr><th style="text-align:left;">WARNING:</th></tr></thead><tbody><tr><td style="text-align:left;">A number of earlier sections in this chapter refer to &quot;copying&quot; or &quot;duplicating&quot; properties. One might assume such copying/duplication would be at the property descriptor level. However, none of those operations actually work that way; they all do simple <code>=</code> style access and assignment, which has the effect of ignoring any nuances in how the underlying descriptor for a property is defined.</td></tr></tbody></table><p>Though it seems far less common out in the wild, we can even define multiple properties at once, each with their own descriptor:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>anotherObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>anotherObj<span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;fave&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// a property descriptor</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;superFave&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// another property descriptor</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>It&#39;s not very common to see this usage, because it&#39;s rarer that you need to specifically control the definition of multiple properties. But it may be useful in some cases.</p><h3 id="accessor-properties" tabindex="-1"><a class="header-anchor" href="#accessor-properties" aria-hidden="true">#</a> Accessor Properties</h3><p>A property descriptor usually defines a <code>value</code> property, as shown above. However, a special kind of property, known as an &quot;accessor property&quot; (aka, a getter/setter), can be defined. For these a property like this, its descriptor does not define a fixed <code>value</code> property, but would instead look something like this:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment">// function to invoke when retrieving the value</span>
    <span class="token function">set</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>   <span class="token comment">// function to invoke when assigning the value</span>
    <span class="token comment">// .. enumerable, etc</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>A getter looks like a property access (<code>obj.prop</code>), but under the covers it invokes the <code>get()</code> method as defined; it&#39;s sort of like if you had called <code>obj.prop()</code>. A setter looks like a property assignment (<code>obj.prop = value</code>), but it invokes the <code>set(..)</code> method as defined; it&#39;s sort of like if you had called <code>obj.prop(value)</code>.</p><p>Let&#39;s illustrate a getter/setter accessor property:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>anotherObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>anotherObj<span class="token punctuation">,</span><span class="token string">&quot;fave&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Getting &#39;fave&#39; value!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Ignoring </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>v<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> assignment.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

anotherObj<span class="token punctuation">.</span>fave<span class="token punctuation">;</span>
<span class="token comment">// Getting &#39;fave&#39; value!</span>
<span class="token comment">// 123</span>

anotherObj<span class="token punctuation">.</span>fave <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token comment">// Ignoring 42 assignment.</span>

anotherObj<span class="token punctuation">.</span>fave<span class="token punctuation">;</span>
<span class="token comment">// Getting &#39;fave&#39; value!</span>
<span class="token comment">// 123</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="enumerable-writable-configurable" tabindex="-1"><a class="header-anchor" href="#enumerable-writable-configurable" aria-hidden="true">#</a> Enumerable, Writable, Configurable</h3><p>Besides <code>value</code> or <code>get()</code> / <code>set(..)</code>, the other 3 attributes of a property descriptor are (as shown above):</p><ul><li><code>enumerable</code></li><li><code>writable</code></li><li><code>configurable</code></li></ul><p>The <code>enumerable</code> attribute controls whether the property will appear in various enumerations of object properties, such as <code>Object.keys(..)</code>, <code>Object.entries(..)</code>, <code>for..in</code> loops, and the copying that occurs with the <code>...</code> object spread and <code>Object.assign(..)</code>. Most properties should be left enumerable, but you can mark certain special properties on an object as non-enumerable if they shouldn&#39;t be iterated/copied.</p><p>The <code>writable</code> attribute controls whether a <code>value</code> assignment (via <code>=</code>) is allowed. To make a property &quot;read only&quot;, define it with <code>writable: false</code>. However, as long as the property is still configurable, <code>Object.defineProperty(..)</code> can still change the value by setting <code>value</code> differently.</p><p>The <code>configurable</code> attribute controls whether a property&#39;s <strong>descriptor</strong> can be re-defined/overwritten. A property that&#39;s <code>configurable: false</code> is locked to its definition, and any further attempts to change it with <code>Object.defineProperty(..)</code> will fail. A non-configurable property can still be assigned new values (via <code>=</code>), as long as <code>writable: true</code> is still set on the property&#39;s descriptor.</p><h2 id="object-sub-types" tabindex="-1"><a class="header-anchor" href="#object-sub-types" aria-hidden="true">#</a> Object Sub-Types</h2><p>There are a variety of specialized sub-types of objects in JS. But by far, the two most common ones you&#39;ll interact with are arrays and <code>function</code>s.</p><table><thead><tr><th style="text-align:left;">NOTE:</th></tr></thead><tbody><tr><td style="text-align:left;">By &quot;sub-type&quot;, we mean the notion of a derived type that has inherited the behaviors from a parent type but then specialized or extended those behaviors. In other words, values of these sub-types are fully objects, but are also <em>more than just</em> objects.</td></tr></tbody></table><h3 id="arrays" tabindex="-1"><a class="header-anchor" href="#arrays" aria-hidden="true">#</a> Arrays</h3><p>Arrays are objects that are specifically intended to be <strong>numerically indexed</strong>, rather than using string named property locations. They are still objects, so a named property like <code>favoriteNumber</code> is legal. But it&#39;s greatly frowned upon to mix named properties into numerically indexed arrays.</p><p>Arrays are preferably defined with literal syntax (similar to objects), but with the <code>[ .. ]</code> square brackets rather than <code>{ .. }</code> curly brackets:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>myList <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">109</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>JS allows any mixture of value types in arrays, including objects, other arrays, functions, etc. As you&#39;re likely already aware, arrays are &quot;zero-indexed&quot;, meaning the first element in the array is at the index <code>0</code>, not <code>1</code>:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>myList <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">109</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

myList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment">// 23</span>
myList<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment">// 42</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Recall that any string property name on an object that &quot;looks like&quot; a number -- is able to be validly coerced to a string -- will actually be treated like a number. The same goes for arrays. You should always use <code>42</code> as a numeric index (aka, property name), but if you use the string <code>&quot;42&quot;</code>, JS will coerce that to a number for you.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// &quot;2&quot; works as an index here, but it&#39;s not advised</span>
myList<span class="token punctuation">[</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// 109</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>One exception to the &quot;no named properties on arrays&quot; rule is that all arrays automatically expose a <code>length</code> property, which is automatically kept updated with the &quot;length&quot; of the array.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>myList <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">109</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

myList<span class="token punctuation">.</span>length<span class="token punctuation">;</span>   <span class="token comment">// 3</span>

<span class="token comment">// &quot;push&quot; another value onto the end of the list</span>
myList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

myList<span class="token punctuation">.</span>length<span class="token punctuation">;</span>   <span class="token comment">// 4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><table><thead><tr><th style="text-align:left;">WARNING:</th></tr></thead><tbody><tr><td style="text-align:left;">Many JS developers incorrectly believe that array <code>length</code> is basically a <em>getter</em> (see &quot;Accessor Properties&quot; earlier in this chapter), but it&#39;s not. The offshoot is that these developers feel like it&#39;s &quot;expensive&quot; to access this property -- as if JS has to on-the-fly recompute the length -- and will thus do things like capture/store the length of an array before doing a non-mutating loop over it. This used to be &quot;best practice&quot; from a performance perspective. But for at least 10 years now, that&#39;s actually been an anti-pattern, because the JS engine is more efficient at managing the <code>length</code> property than our JS code is at trying to &quot;outsmart&quot; the engine to avoid invoking something we think is a <em>getter</em>. It&#39;s more efficient to let the JS engine do its job, and just access the property whenever and however often it&#39;s needed.</td></tr></tbody></table><h4 id="empty-slots" tabindex="-1"><a class="header-anchor" href="#empty-slots" aria-hidden="true">#</a> Empty Slots</h4><p>JS arrays also have a really unfortunate &quot;flaw&quot; in their design, referred to as &quot;empty slots&quot;. If you assign an index of an array more than one position beyond the current end of the array, JS will leave the in between slots &quot;empty&quot; rather than auto-assigning them to <code>undefined</code> as you might expect:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>myList <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">109</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
myList<span class="token punctuation">.</span>length<span class="token punctuation">;</span>              <span class="token comment">// 3</span>

myList<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">;</span>
myList<span class="token punctuation">.</span>length<span class="token punctuation">;</span>              <span class="token comment">// 15</span>

myList<span class="token punctuation">;</span>                     <span class="token comment">// [ 23, 42, 109, empty x 11, &quot;Hello&quot; ]</span>

<span class="token comment">// looks like a real slot with a</span>
<span class="token comment">// real `undefined` value in it,</span>
<span class="token comment">// but beware, it&#39;s a trick!</span>
myList<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                  <span class="token comment">// undefined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>You might wonder why empty slots are so bad? One reason: there are APIs in JS, like array&#39;s <code>map(..)</code>, where empty slots are suprisingly skipped over! Never, ever intentionally create empty slots in your arrays. This in undebateably one of JS&#39;s &quot;bad parts&quot;.</p><h3 id="functions" tabindex="-1"><a class="header-anchor" href="#functions" aria-hidden="true">#</a> Functions</h3><p>I don&#39;t have much specifically to say about functions here, other than to point out that they are also sub-object-types. This means that in addition to being executable, they can also have named properties added to or accessed from them.</p><p>Functions have two pre-defined properties you may find yourself interacting with, specifially for meta-programming purposes:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">help</span><span class="token punctuation">(</span><span class="token parameter">opt1<span class="token punctuation">,</span>opt2<span class="token punctuation">,</span><span class="token operator">...</span>remainingOpts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ..</span>
<span class="token punctuation">}</span>

help<span class="token punctuation">.</span>name<span class="token punctuation">;</span>          <span class="token comment">// &quot;help&quot;</span>
help<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token comment">// 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>The <code>length</code> of a function is the count of its explicitly defined parameters, up to but not including a parameter that either has a default value defined (e.g., <code>param = 42</code>) or a &quot;rest parameter&quot; (e.g., <code>...remainingOpts</code>).</p><h4 id="avoid-setting-function-object-properties" tabindex="-1"><a class="header-anchor" href="#avoid-setting-function-object-properties" aria-hidden="true">#</a> Avoid Setting Function-Object Properties</h4><p>You should avoid assigning properties on function objects. If you&#39;re looking to store extra information associated with a function, use a separate <code>Map(..)</code> (or <code>WeakMap(..)</code>) with the function object as the key, and the extra information as the value.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>extraInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

extraInfo<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>help<span class="token punctuation">,</span><span class="token string">&quot;this is some important information&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// later:</span>
extraInfo<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>help<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// &quot;this is some important information&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="object-characteristics" tabindex="-1"><a class="header-anchor" href="#object-characteristics" aria-hidden="true">#</a> Object Characteristics</h2><p>In addition to defining behaviors for specific properties, certain behaviors are configurable across the whole object:</p><ul><li>extensible</li><li>sealed</li><li>frozen</li></ul><h3 id="extensible" tabindex="-1"><a class="header-anchor" href="#extensible" aria-hidden="true">#</a> Extensible</h3><p>Extensibility refers to whether an object can have new properties defined/added to it. By default, all objects are extensible, but you can change shut off extensibility for an object:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>myObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">favoriteNumber</span><span class="token operator">:</span> <span class="token number">42</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

myObj<span class="token punctuation">.</span>firstName <span class="token operator">=</span> <span class="token string">&quot;Kyle&quot;</span><span class="token punctuation">;</span>                  <span class="token comment">// works fine</span>

Object<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span>myObj<span class="token punctuation">)</span><span class="token punctuation">;</span>

myObj<span class="token punctuation">.</span>nicknames <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">&quot;getify&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ydkjs&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">// fails</span>
myObj<span class="token punctuation">.</span>favoriteNumber <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>                <span class="token comment">// works fine</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>In non-strict-mode, an assignment that creates a new property will silently fail, whereas in strict mode an exception will be thrown.</p><h3 id="sealed" tabindex="-1"><a class="header-anchor" href="#sealed" aria-hidden="true">#</a> Sealed</h3><p>// TODO</p><h3 id="frozen" tabindex="-1"><a class="header-anchor" href="#frozen" aria-hidden="true">#</a> Frozen</h3><p>// TODO</p><h2 id="extending-the-mop" tabindex="-1"><a class="header-anchor" href="#extending-the-mop" aria-hidden="true">#</a> Extending The MOP</h2><p>As mentioned at the start of this chapter, objects in JS behave according to a set of rules referred to as the Metaobject Protocol (MOP)[^mop]. Now that we understand more fully how objects work by default, we want to turn our attention to how we can hook into some of these default behaviors and override/customize them.</p><p>// TODO</p><h2 id="prototype-chain" tabindex="-1"><a class="header-anchor" href="#prototype-chain" aria-hidden="true">#</a> <code>[[Prototype]]</code> Chain</h2><p>One of the most important, but least obvious, characteristics of an object (part of the MOP) is referred to as its &quot;prototype chain&quot;; the official JS specification notation is <code>[[Prototype]]</code>. Make sure not to confuse this <code>[[Prototype]]</code> with a public property named <code>prototype</code>. Despite the naming, these are distinct concepts.</p><p>The <code>[[Prototype]]</code> is an internal linkage that an object gets by default when its created, pointing to another object. This linkage is a hidden, often subtle characteristic of an object, but it has profound impacts on how interactions with the object will play out. It&#39;s referred to as a &quot;chain&quot; because one object links to another, which in turn links to another, ... and so on. There is an <em>end</em> or <em>top</em> to this chain, where the linkage stops and there&#39;s no further to go. More on that shortly.</p><p>We already saw several implications of <code>[[Prototype]]</code> linkage in Chapter 1. For example, by default, all objects are <code>[[Prototype]]</code>-linked to the built-in object named <code>Object.prototype</code>.</p><table><thead><tr><th style="text-align:left;">WARNING:</th></tr></thead><tbody><tr><td style="text-align:left;">That <code>Object.prototype</code> name itself can be confusing, since it uses a property called <code>prototype</code>. How are <code>[[Prototype]]</code> and <code>prototype</code> related!? Put such questions/confusion on pause for a bit, as we&#39;ll come back an explain the differences between <code>[[Prototype]]</code> and <code>prototype</code> soon. For the moment, just assume the presence of this important but weirdly named built-in object, <code>Object.prototype</code>.</td></tr></tbody></table><p>Let&#39;s consider some code:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>myObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">favoriteNumber</span><span class="token operator">:</span> <span class="token number">42</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>That should look familiar from Chapter 1. But what you <em>don&#39;t see</em> in this code is that the object there was automatically linked (via its internal <code>[[Prototype]]</code>) to that automatically built-in, but weirdly named, <code>Object.prototype</code> object.</p><p>When we do things like:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>myObj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                             <span class="token comment">// &quot;[object Object]&quot;</span>

myObj<span class="token punctuation">.</span><span class="token function">hasOwnPropertyName</span><span class="token punctuation">(</span><span class="token string">&quot;favoriteNumber&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>We&#39;re taking advantage of this internal <code>[[Prototype]]</code> linkage, without really realizing it. Since <code>myObj</code> does not have <code>toString</code> or <code>hasOwnPropertyName</code> properties defined on it, those property accesses actually end up <strong>DELEGATING</strong> the access to continue its lookup along the <code>[[Prototype]]</code> chain.</p><p>Since <code>myObj</code> is <code>[[Prototype]]</code>-linked to the object named <code>Object.prototype</code>, the lookup for <code>toString</code> and <code>hasOwnPropertyName</code> properties continues on that object; and indeed, these methods are found there!</p><p>The ability for <code>myObj.toString</code> to access the <code>toString</code> property even though it doesn&#39;t actually have it, is commonly referred to as &quot;inheritance&quot;, or more specifically, &quot;prototypal inheritance&quot;. The <code>toString</code> and <code>hasOwnPropertyName</code> properties, along with many others, are said to be &quot;inherited properties&quot; on <code>myObj</code>.</p><table><thead><tr><th style="text-align:left;">NOTE:</th></tr></thead><tbody><tr><td style="text-align:left;">I have a lot of frustrations with the usage of the word &quot;inheritance&quot; here -- it should be called &quot;delegation&quot;! -- but that&#39;s what most people refer to it as, so we&#39;ll begrudgingly comply and use that same terminology for now (albeit under protest, with &quot; quotes). I&#39;ll save my objections for an appendix of this book.</td></tr></tbody></table><p><code>Object.prototype</code> has several built-in properties and methods, all of which are &quot;inherited&quot; by any object that is <code>[[Prototype]]</code>-linked, either directly or through another object&#39;s linkage, to <code>Object.prototype</code>.</p><p>Some common &quot;inherited&quot; properties from <code>Object.prototype</code> include:</p><ul><li><code>constructor</code></li><li><code>__proto__</code></li><li><code>toString()</code></li><li><code>valueOf()</code></li><li><code>hasOwnProperty(..)</code></li><li><code>isPrototypeOf(..)</code></li></ul><h3 id="creating-an-object-with-a-different-prototype" tabindex="-1"><a class="header-anchor" href="#creating-an-object-with-a-different-prototype" aria-hidden="true">#</a> Creating An Object With A Different <code>[[Prototype]]</code></h3><p>By default, any object you create in your programs will be <code>[[Prototype]]</code>-linked to that <code>Object.prototype</code> object. However, you can create an object with a different linkage like this:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>myObj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>differentObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>The <code>Object.create(..)</code> method takes its first argument as the value to set for the newly created object&#39;s <code>[[Prototype]]</code>.</p><p>One downside to this approach is that you aren&#39;t using the <code>{ .. }</code> literal syntax, so you don&#39;t initially define any contents for <code>myObj</code>. You typically then have to define properties one-by-one, using <code>=</code>.</p><table><thead><tr><th style="text-align:left;">NOTE:</th></tr></thead><tbody><tr><td style="text-align:left;">The second, optional argument to <code>Object.create(..)</code> is -- like the second argument to <code>Object.defineProperties(..)</code> as discussed earlier -- an object with properties that hold descriptors to initially define the new object with. In practice out in the wild, this form is rarely used, likely because it&#39;s more awkward to specify full descriptors instead of just name/value pairs. But it may come in handy in some limited cases.</td></tr></tbody></table><p>Alternately, but less preferably, you can use the <code>{ .. }</code> literal syntax along with a special (and strange looking!) property:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>myObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">__proto__</span><span class="token operator">:</span> differentObj
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><table><thead><tr><th style="text-align:left;">WARNING:</th></tr></thead><tbody><tr><td style="text-align:left;">The strange looking <code>__proto__</code> property existed in some JS engines for more than 20 years, but was only standardized in JS as of ES6. Even still, it was added in Appendix B of the specification[^specApB], which lists features that TC39 begrudgingly includes because they exist popularly in various browser-based JS engines and therefore are a de-facto reality even if they didn&#39;t originate with TC39. This feature is thus &quot;guaranteed&quot; by the spec to exist in all conforming browser-based JS engines, but is not necessarily guaranteed to work in other independent JS engines. Node.js uses the JS engine (v8) from the Chrome browser, so Node.js gets <code>__proto__</code> by default/accident. Be careful when using <code>__proto__</code> to be aware of all the JS engine environments your code will run in.</td></tr></tbody></table><p>Whether you use <code>Object.create(..)</code> or <code>__proto__</code>, the object in question will be <code>[[Prototype]]</code>-linked to a different object than the default <code>Object.prototype</code>.</p><h4 id="empty-prototype-linkage" tabindex="-1"><a class="header-anchor" href="#empty-prototype-linkage" aria-hidden="true">#</a> Empty <code>[[Prototype]]</code> Linkage</h4><p>We mentioned above that the <code>[[Prototype]]</code> chain has to stop somewhere, so as to have lookups not continue forever. <code>Object.prototype</code> is typically the top/end of every <code>[[Prototype]]</code> chain, as its own <code>[[Prototype]]</code> is <code>null</code>, and therefore there&#39;s nowhere else to continue looking.</p><p>However, you can also define objects with their own <code>null</code> value for <code>[[Prototype]]</code>, such as:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>emptyObj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or: emptyObj = { __proto__: null }</span>

empty<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>   <span class="token comment">// undefined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>It can be quite useful to create an object with no <code>[[Prototype]]</code> linkage to <code>Object.prototype</code>. For example, as mentioned in Chapter 1, the <code>in</code> and <code>for..in</code> constructs will consult the <code>[[Prototype]]</code> chain for inherited properties. But this may be undesirable, as you may not want something like <code>&quot;toString&quot; in myObj</code> to resolve successfully.</p><p>Moreover, an object with an empty <code>[[Prototype]]</code> is safe from any accidental &quot;inheritance&quot; collision between its own property names and the ones it &quot;inherits&quot; from elsewhere. These types of (useful!) objects are sometimes referred to in popular parlance as &quot;dictionary objects&quot;.</p><h3 id="prototype-vs-prototype" tabindex="-1"><a class="header-anchor" href="#prototype-vs-prototype" aria-hidden="true">#</a> <code>[[Prototype]]</code> vs <code>prototype</code></h3><p>Notice that public property name <code>prototype</code> in the name/location of this special object, <code>Object.prototype</code>? What&#39;s that all about?</p><p><code>Object</code> is the <code>Object(..)</code> function; by default, all functions (which are objects!) have such a <code>prototype</code> property on them, pointing at an object.</p><p>Any here&#39;s where the name conflict between <code>[[Prototype]]</code> and <code>prototype</code> really bites us. The <code>prototype</code> property on a function doesn&#39;t define any linkage that the function itself experiences. Indeed, functions (as objects) have their own internal <code>[[Prototype]]</code> linkage somewhere else -- more on that in a second.</p><p>Rather, the <code>prototype</code> property on a function refers to an object that should be <em>linked to</em> by any other object that is created when calling that function with the <code>new</code> keyword:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>myObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// is basically the same as:</span>
myObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Since the <code>{ .. }</code> object literal syntax is essentially the same as a <code>new Object()</code> call, the built-in object named/located at <code>Object.prototype</code> is used as the internal <code>[[Prototype]]</code> linkage for the new object we create and name <code>myObj</code>.</p><p>Phew! Talk about a topic made significantly more confusing just because of the name overlap between <code>[[Prototype]]</code> and <code>prototype</code>!</p><hr><p>But where do functions themselves (as objects!) link to, <code>[[Prototype]]</code> wise? They link to <code>Function.prototype</code>, yet another built-in object, located at the <code>prototype</code> property on the <code>Function</code> function.</p><p>In other words, you could think of functions themselves as having been &quot;created&quot; by a <code>new Function(..)</code> call, and then <code>[[Prototype]]</code>-linked to the <code>Function.prototype</code> object. This object contains properties/methods all functions &quot;inherit&quot; by default, such as <code>toString()</code> (to serialize the source code of a function) and <code>call(..)</code> / <code>apply(..)</code> / <code>bind(..)</code> (we&#39;ll explain these later in this book).</p><h2 id="objects-behavior" tabindex="-1"><a class="header-anchor" href="#objects-behavior" aria-hidden="true">#</a> Objects Behavior</h2><p>Properties on objects are internally defined and controlled by a &quot;descriptor&quot; metaobject, which includes attributes such as <code>value</code> (the property&#39;s present value) and <code>enumerable</code> (a boolean controlling whether the property is included in enumerable-only listings of properties/property names).</p><p>The way object and their properties work in JS is referred to as the &quot;metaobject protocol&quot; (MOP)[^mop]. We can control the precise behavior of properties via <code>Object.defineProperty(..)</code>, as well as object-wide behaviors with <code>Object.freeze(..)</code>. But even more powerfully, we can hook into and override certain default behaviors on objects using special pre-defined Symbols.</p><p>Prototypes are internal linkages between objects that allow property or method access against one object -- if the property/method requested is absent -- to be handled by &quot;delegating&quot; that access lookup to another object. When the delegation involves a method, the context for the method to run in is shared from the initial object to the target object via the <code>this</code> keyword.</p><p>// TODO: move to a later chapter Prior to ES6, the prototype system was how developers expressed (i.e., emulated) the class design pattern in JS -- so-called &quot;prototypal inheritance&quot;. ES6 introduced the <code>class</code> keyword as a syntactic affordance to embrace and centralize the prevalence of varied class design approaches. Ostensibly, <code>class</code> was introduced as &quot;sugar&quot; built on top of manual/explicit prototypal classes.</p><p>[^mop]: &quot;Metaobject&quot;, Wikipedia, https://en.wikipedia.org/wiki/Metaobject</p><p>[^specApB]: ECMAScript 2021 Language Specification, Appendix B: Additional ECMAScript Features for Web Browsers, https://262.ecma-international.org/12.0/#sec-additional-ecmascript-features-for-web-browsers (latest as of time of this writing in January 2022)</p><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch1.html" class="" aria-label="Chapter 1: Object Foundations"><!--[--><!--]--> Chapter 1: Object Foundations <!--[--><!--]--></a></span><span class="next"><a href="/You-Dont-Know-JS-Yet/en-US/objects-classes/ch3" class="" aria-label="/en-US/objects-classes/ch3"><!--[--><!--]--> /en-US/objects-classes/ch3 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/You-Dont-Know-JS-Yet/assets/app.7fbe9127.js" defer></script>
  </body>
</html>
